#!/bin/bash

# Fresh token
TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJTNnZIMkkxM25vRk0zWE9uZlc0UDRhZWVKa1ZfMXhvbVBWVV9KZU5kSTJVIn0.eyJleHAiOjE3NTc5NjA3NzIsImlhdCI6MTc1Nzk2MDQ3MiwianRpIjoiMmQxNWYxZjEtOGQwNC00M2NjLWEzZjctYWU1YTYwOWYwYTkyIiwiaXNzIjoiaHR0cDovL2F1dGgudGlwLmxvY2FsaG9zdC9yZWFsbXMvdGlwIiwiYXVkIjoiYWNjb3VudCIsInN1YiI6ImVlZWYyNDExLTllN2QtNDc2OS1hODdiLWMxMDU3MDMzY2Y3MyIsInR5cCI6IkJlYXJlciIsImF6cCI6InRpcC1hcHAiLCJzZXNzaW9uX3N0YXRlIjoiZmEzZjM1YTctNDhmYS00M2NkLTliMzAtMjRkOGQ4MTdjYjVkIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwOi8vdGlwLmxvY2FsaG9zdCIsImh0dHA6Ly9sb2NhbGhvc3Q6KiJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy10aXAiLCJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsiYWNjb3VudCI6eyJyb2xlcyI6WyJtYW5hZ2UtYWNjb3VudCIsIm1hbmFnZS1hY2NvdW50LWxpbmtzIiwidmlldy1wcm9maWxlIl19fSwic2NvcGUiOiJwcm9maWxlIGVtYWlsIiwic2lkIjoiZmEzZjM1YTctNDhmYS00M2NkLTliMzAtMjRkOGQ4MTdjYjVkIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiJSaWNoYXJkIFJvYWNoIiwicHJlZmVycmVkX3VzZXJuYW1lIjoicmljaGFyZC5yb2FjaCIsImdpdmVuX25hbWUiOiJSaWNoYXJkIiwiZmFtaWx5X25hbWUiOiJSb2FjaCIsImVtYWlsIjoicmljaGFyZC5yb2FjaEBnbWFpbC5jb20ifQ.QX5D33xol6UpYZoS6_JfA2A3z7-zP2ZfNKvCRtXd8cYqe4N-NUtYSpqlX0q51mbIgzVIfZ6TPeHYn-lqI8SH0seIKlv50I3tmjvpD3hapFcWChZjvnxrkt1Kc5qFBsb3kKsylo1X4_3Unz3AWdFjlIbJuT2YtzDU4St1zZsAsaonr-wl_Kl-Fu1tXR4jPhf6KhMhdPj5uBlqlbiI0T0oPNOaq5gSnIZq6lkvPEnlc1cJq_cw5JglWUtnYkT6EYa53LLUg8yRGMlAWyCTWr2ytPoEBtmaLtNGFM6_mk_nyd2SvAxytrGSPQsGxsBzN1XIhl0q0m03W7VNaL9sxwckBw"

echo "Testing Vite proxy with fresh token..."
curl -X POST 'http://localhost:5173/api/auth/login' \
  -H 'Content-Type: application/json' \
  -d "{\"keycloakToken\": \"$TOKEN\"}"

echo ""
echo "Done!"